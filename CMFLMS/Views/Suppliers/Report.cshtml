@model IEnumerable<CMFLMS.Models.Library.Supplier>

@{
    ViewBag.Title = "Report";
}
<h2>Supplier Report</h2>

@*<style type="text/css">
    tfoot input {
        width: 100%;
        padding: 3px;
        box-sizing: border-box;
    }
</style>*@
<script src="~/Scripts/jquery-1.10.2.min.js" type="text/javascript" language="javascript"></script>
@*<script src="~/Scripts/jquery-1.10.2.js" type="text/javascript" language="javascript"></script>
<link href="~/Content/jquery.dataTables.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery.dataTables.js" type="text/javascript" language="javascript"></script>*@

@*<script type="text/javascript">
    $(document).ready(function () {
        // Setup - add a text input to each footer cell
        $('#tblSupplier tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Search ' + title + '"class="form-control" />');
        });

        // DataTable
        var table = $('#tblSupplier').DataTable();

        // Apply the search
        table.columns().every(function () {
            var that = this;

            $('input', this.footer()).on('keyup change', function () {
                if (that.search() !== this.value) {
                    that
                        .search(this.value)
                        .draw();

                }
            });
        });
    });

</script>*@

<div class="container">
    <div class="form-group">
        <div class="input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
            <input type="text" id="Search" placeholder="Search" class="form-control" />
        </div>
    </div>
</div>


<p style="color:red"><b>Total Suppliers: @ViewBag.count</b></p>



<script type="text/javascript">

$(function(){
    $('button').click(function(){
        var url = 'data:application/vnd.ms-excel,' + encodeURIComponent($('#Supplier').html())
        location.href=url
        return false
        
    })
})

</script>
<button class="btn btn-success">EXPORT</button>

<div id="Supplier">
    <br>
    <table class="table table-striped table-bordered table-hover table-condensed">

        <tr>

            <th>
                @Html.DisplayNameFor(model => model.SupplierName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ContactPerson)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Address)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Telephone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AddedDate)
            </th>
            <th>
                @Html.DisplayName("Category")
            </th>
           
        </tr>

        @foreach (var item in Model)
        {
            <tr class="Search">

                <td>
                    @Html.DisplayFor(modelItem => item.SupplierName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ContactPerson)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Address)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Telephone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.AddedDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.categories.CategoryName)
                </td>
            </tr>
        }
        @*<tfoot>
                <tr>
                    <th>Supplier</th>
                    <th>C.Person</th>
                    <th>Address</th>
                    <th>Telephone</th>
                    <th>Email</th>
                    <th>Date</th>
                    <th>Category</th>
                </tr>
            </tfoot>*@

    </table>
</div>
   @*</div>*@


<script>
                    $(document).ready(function () {
                    function Contains(text_one, text_two) {
                        if (text_one.indexOf(text_two) != -1)
                            return true;
                    }
                    $("#Search").keyup(function () {
                        var searchText = $("#Search").val().toLowerCase();
                        $(".Search").each(function () {
                            if (!Contains($(this).text().toLowerCase(), searchText)) {
                                $(this).hide();
                            }
                            else {
                              
                                $(this).show();
                            }
                        });
                    });
                });
</script>